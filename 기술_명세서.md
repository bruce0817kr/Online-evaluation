# ì˜¨ë¼ì¸ í‰ê°€ ì‹œìŠ¤í…œ ê¸°ìˆ  ëª…ì„¸ì„œ

## ğŸ— ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì¡°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   í”„ë¡ íŠ¸ì—”ë“œ     â”‚    â”‚    ë°±ì—”ë“œ       â”‚    â”‚   ë°ì´í„°ë² ì´ìŠ¤   â”‚
â”‚   (React)       â”‚â—„â”€â”€â–ºâ”‚   (FastAPI)     â”‚â—„â”€â”€â–ºâ”‚   (MongoDB)     â”‚
â”‚   Port: 3000    â”‚    â”‚   Port: 8080    â”‚    â”‚   Port: 27017   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚      ìºì‹œ       â”‚
                       â”‚    (Redis)      â”‚
                       â”‚   Port: 6379    â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Docker ì»¨í…Œì´ë„ˆ êµ¬ì„±

#### 1. Frontend Container
- **ë² ì´ìŠ¤ ì´ë¯¸ì§€**: nginx:alpine
- **ë¹Œë“œ ë„êµ¬**: Node.js 18 + npm
- **ì›¹ì„œë²„**: Nginx
- **í¬íŠ¸**: 3000 â†’ 80 (ë‚´ë¶€)

#### 2. Backend Container
- **ë² ì´ìŠ¤ ì´ë¯¸ì§€**: python:3.11-slim
- **ì›¹ í”„ë ˆì„ì›Œí¬**: FastAPI + Uvicorn
- **í¬íŠ¸**: 8080
- **í™˜ê²½ë³€ìˆ˜**:
  - `MONGODB_URL`: mongodb://admin:password123@mongodb:27017/online_evaluation?authSource=admin
  - `REDIS_URL`: redis://redis:6379

#### 3. Database Container
- **ì´ë¯¸ì§€**: mongo:6
- **í¬íŠ¸**: 27017
- **ì¸ì¦**: admin/password123
- **ë³¼ë¥¨**: mongodb_data

#### 4. Cache Container
- **ì´ë¯¸ì§€**: redis:7-alpine
- **í¬íŠ¸**: 6379
- **ë³¼ë¥¨**: redis_data

---

## ğŸ’¾ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### ì‚¬ìš©ì (Users) ì»¬ë ‰ì…˜
```json
{
  "_id": "ObjectId",
  "login_id": "string",
  "password": "hashed_string",
  "user_name": "string",
  "email": "string",
  "phone": "string",
  "role": "admin|evaluator",
  "is_active": true,
  "created_at": "datetime",
  "last_login": "datetime"
}
```

### í”„ë¡œì íŠ¸ (Projects) ì»¬ë ‰ì…˜
```json
{
  "_id": "ObjectId",
  "name": "string",
  "description": "string",
  "deadline": "datetime",
  "created_by": "ObjectId",
  "created_at": "datetime",
  "is_active": true,
  "total_companies": 0,
  "total_evaluations": 0,
  "completed_evaluations": 0
}
```

### ê¸°ì—… (Companies) ì»¬ë ‰ì…˜
```json
{
  "_id": "ObjectId",
  "name": "string",
  "business_number": "string",
  "address": "string",
  "contact_person": "string",
  "phone": "string",
  "email": "string",
  "project_id": "ObjectId",
  "files": [],
  "evaluation_status": "pending|in_progress|completed",
  "created_at": "datetime"
}
```

### í‰ê°€ í…œí”Œë¦¿ (EvaluationTemplates) ì»¬ë ‰ì…˜
```json
{
  "_id": "ObjectId",
  "name": "string",
  "description": "string",
  "project_id": "ObjectId",
  "items": [
    {
      "id": "string",
      "name": "string",
      "description": "string",
      "max_score": 0,
      "weight": 0.0
    }
  ],
  "created_by": "ObjectId",
  "created_at": "datetime",
  "is_active": true
}
```

### í‰ê°€ ë°°ì • (Assignments) ì»¬ë ‰ì…˜
```json
{
  "_id": "ObjectId",
  "evaluator_id": "ObjectId",
  "company_id": "ObjectId",
  "template_id": "ObjectId",
  "deadline": "datetime",
  "status": "assigned|in_progress|completed",
  "created_at": "datetime",
  "sheet_id": "string"
}
```

### í‰ê°€ ê²°ê³¼ (Evaluations) ì»¬ë ‰ì…˜
```json
{
  "_id": "ObjectId",
  "sheet_id": "string",
  "evaluator_id": "ObjectId",
  "company_id": "ObjectId",
  "template_id": "ObjectId",
  "scores": [
    {
      "item_id": "string",
      "score": 0,
      "comment": "string"
    }
  ],
  "total_score": 0,
  "status": "draft|submitted|finalized",
  "submitted_at": "datetime",
  "created_at": "datetime",
  "updated_at": "datetime"
}
```

---

## ğŸ”— API ì—”ë“œí¬ì¸íŠ¸

### ì¸ì¦ API
- `POST /api/auth/login` - ë¡œê·¸ì¸
- `GET /api/auth/me` - í˜„ì¬ ì‚¬ìš©ì ì •ë³´

### ì‚¬ìš©ì ê´€ë¦¬ API
- `GET /api/users` - ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ
- `POST /api/users` - ì‚¬ìš©ì ìƒì„±

### í‰ê°€ì ê´€ë¦¬ API
- `GET /api/evaluators` - í‰ê°€ì ëª©ë¡ ì¡°íšŒ
- `POST /api/evaluators` - í‰ê°€ì ìƒì„±
- `POST /api/evaluators/batch` - í‰ê°€ì ì¼ê´„ ìƒì„±

### í”„ë¡œì íŠ¸ ê´€ë¦¬ API
- `GET /api/projects` - í”„ë¡œì íŠ¸ ëª©ë¡ ì¡°íšŒ
- `POST /api/projects` - í”„ë¡œì íŠ¸ ìƒì„±

### ê¸°ì—… ê´€ë¦¬ API
- `GET /api/companies` - ê¸°ì—… ëª©ë¡ ì¡°íšŒ
- `POST /api/companies` - ê¸°ì—… ìƒì„±

### íŒŒì¼ ê´€ë¦¬ API
- `POST /api/upload` - íŒŒì¼ ì—…ë¡œë“œ
- `GET /api/files/{file_id}` - íŒŒì¼ ë‹¤ìš´ë¡œë“œ
- `GET /api/files/{file_id}/preview` - íŒŒì¼ ë¯¸ë¦¬ë³´ê¸°

### í‰ê°€ ë°°ì • API
- `POST /api/assignments` - í‰ê°€ ë°°ì • ìƒì„±
- `POST /api/assignments/batch` - í‰ê°€ ë°°ì • ì¼ê´„ ìƒì„±

### í‰ê°€ ìˆ˜í–‰ API
- `GET /api/evaluation/{sheet_id}` - í‰ê°€ì§€ ì¡°íšŒ
- `POST /api/evaluation/submit` - í‰ê°€ ì œì¶œ
- `POST /api/evaluation/save` - í‰ê°€ ì„ì‹œì €ì¥

### ëŒ€ì‹œë³´ë“œ API
- `GET /api/dashboard/evaluator` - í‰ê°€ì ëŒ€ì‹œë³´ë“œ
- `GET /api/dashboard/admin` - ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ

### ë¶„ì„ API
- `GET /api/analytics/project/{project_id}` - í”„ë¡œì íŠ¸ ë¶„ì„

### ë‚´ë³´ë‚´ê¸° API
- `GET /api/evaluations/{evaluation_id}/export` - ë‹¨ì¼ í‰ê°€ ë‚´ë³´ë‚´ê¸°
- `POST /api/evaluations/bulk-export` - ì¼ê´„ í‰ê°€ ë‚´ë³´ë‚´ê¸°
- `GET /api/evaluations/export-list` - ë‚´ë³´ë‚´ê¸° ê°€ëŠ¥í•œ í‰ê°€ ëª©ë¡

### í…œí”Œë¦¿ ê´€ë¦¬ API
- `GET /api/templates` - í…œí”Œë¦¿ ëª©ë¡ ì¡°íšŒ
- `POST /api/templates` - í…œí”Œë¦¿ ìƒì„±

### í—¬ìŠ¤ì²´í¬ API
- `GET /health` - ê¸°ë³¸ í—¬ìŠ¤ì²´í¬
- `GET /api/health` - API í—¬ìŠ¤ì²´í¬
- `GET /api/health/detailed` - ìƒì„¸ í—¬ìŠ¤ì²´í¬
- `GET /api/health/liveness` - ìƒì¡´ ìƒíƒœ í™•ì¸
- `GET /api/health/readiness` - ì¤€ë¹„ ìƒíƒœ í™•ì¸
- `GET /api/health/metrics` - ì‹œìŠ¤í…œ ë©”íŠ¸ë¦­
- `GET /db-status` - ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ

### ì‹œìŠ¤í…œ ê´€ë¦¬ API
- `POST /api/init` - ì‹œìŠ¤í…œ ì´ˆê¸°í™”
- `GET /api/status` - API ìƒíƒœ í™•ì¸

---

## ğŸ” ë³´ì•ˆ ì„¤ì •

### ì¸ì¦ ë° ê¶Œí•œ
- **í† í° ë°©ì‹**: JWT (JSON Web Token)
- **ì•”í˜¸í™”**: bcrypt í•´ì‹±
- **ì„¸ì…˜ ê´€ë¦¬**: Redis ê¸°ë°˜

### API ë³´ì•ˆ
- **CORS ì„¤ì •**: í—ˆìš©ëœ ë„ë©”ì¸ë§Œ ì ‘ê·¼
- **Rate Limiting**: API í˜¸ì¶œ ì œí•œ
- **ì…ë ¥ ê²€ì¦**: Pydantic ëª¨ë¸ ê¸°ë°˜ ê²€ì¦

### ë°ì´í„°ë² ì´ìŠ¤ ë³´ì•ˆ
- **MongoDB ì¸ì¦**: ì‚¬ìš©ìëª…/ë¹„ë°€ë²ˆí˜¸ ê¸°ë°˜
- **ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬**: Docker ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬
- **ë°±ì—… ì•”í˜¸í™”**: ì¤‘ìš” ë°ì´í„° ì•”í˜¸í™”

---

## ğŸ“Š ì„±ëŠ¥ ìµœì í™”

### ë°±ì—”ë“œ ìµœì í™”
- **ë¹„ë™ê¸° ì²˜ë¦¬**: FastAPI async/await
- **ì»¤ë„¥ì…˜ í’€ë§**: MongoDB ì—°ê²° í’€
- **ìºì‹±**: Redis ê¸°ë°˜ ì„¸ì…˜ ë° ì„ì‹œ ë°ì´í„° ìºì‹±

### í”„ë¡ íŠ¸ì—”ë“œ ìµœì í™”
- **ì½”ë“œ ë¶„í• **: React lazy loading
- **ë²ˆë“¤ ìµœì í™”**: Webpack ìµœì í™”
- **ì •ì  íŒŒì¼ ìºì‹±**: Nginx ìºì‹œ í—¤ë”

### ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”
```javascript
// MongoDB ì¸ë±ìŠ¤ ì„¤ì •
db.users.createIndex({ "login_id": 1 }, { unique: true })
db.companies.createIndex({ "project_id": 1 })
db.evaluations.createIndex({ "evaluator_id": 1, "created_at": -1 })
db.assignments.createIndex({ "evaluator_id": 1, "status": 1 })
```

---

## ğŸ”§ ê°œë°œ í™˜ê²½ ì„¤ì •

### ë¡œì»¬ ê°œë°œ í™˜ê²½
```bash
# ê°œë°œ ëª¨ë“œë¡œ ì‹¤í–‰
docker-compose -f docker-compose.yml up -d

# ë°±ì—”ë“œ ê°œë°œ ì„œë²„ (Hot Reload)
cd backend
pip install -r requirements.txt
uvicorn server:app --reload --host 0.0.0.0 --port 8080

# í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ ì„œë²„ (Hot Reload)
cd frontend
npm install
npm start
```

### í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
```env
# .env íŒŒì¼
MONGODB_URL=mongodb://admin:password123@localhost:27017/online_evaluation?authSource=admin
REDIS_URL=redis://localhost:6379
JWT_SECRET_KEY=your-secret-key-here
CORS_ORIGINS=["http://localhost:3000"]
```

### ë””ë²„ê¹… ë„êµ¬
- **Backend Logging**: Python logging ëª¨ë“ˆ
- **Frontend DevTools**: React Developer Tools
- **Database**: MongoDB Compass
- **API Testing**: Swagger UI (/docs)

---

## ğŸ“ˆ ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…

### ë¡œê·¸ ë ˆë²¨
- **DEBUG**: ê°œë°œ í™˜ê²½ ë””ë²„ê¹…
- **INFO**: ì¼ë°˜ì ì¸ ì •ë³´
- **WARNING**: ê²½ê³  ì‚¬í•­
- **ERROR**: ì˜¤ë¥˜ ë°œìƒ
- **CRITICAL**: ì‹¬ê°í•œ ì˜¤ë¥˜

### ë©”íŠ¸ë¦­ ìˆ˜ì§‘
```python
# ì£¼ìš” ë©”íŠ¸ë¦­
# - API ì‘ë‹µ ì‹œê°„
# - ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ì‹œê°„
# - ë™ì‹œ ì ‘ì†ì ìˆ˜
# - ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
# - CPU ì‚¬ìš©ë¥ 
```

### ì•Œë¦¼ ì„¤ì •
- ì„œë¹„ìŠ¤ ë‹¤ìš´ ì‹œ ì•Œë¦¼
- ì—ëŸ¬ìœ¨ ì„ê³„ê°’ ì´ˆê³¼ ì‹œ ì•Œë¦¼
- ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ ì„ê³„ê°’ ì´ˆê³¼ ì‹œ ì•Œë¦¼

---

## ğŸ§ª í…ŒìŠ¤íŠ¸

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
```bash
# ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸
cd backend
python -m pytest tests/

# í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸
cd frontend
npm test
```

### í†µí•© í…ŒìŠ¤íŠ¸
```bash
# ì „ì²´ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸
python comprehensive_test_final.py
```

### ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
```bash
# ë¶€í•˜ í…ŒìŠ¤íŠ¸
python full_system_test.py
```

---

## ğŸ”„ ë°°í¬ ì „ëµ

### Blue-Green ë°°í¬
1. ìƒˆ ë²„ì „ì„ ë³„ë„ í™˜ê²½ì— ë°°í¬
2. í—¬ìŠ¤ì²´í¬ í†µê³¼ í™•ì¸
3. íŠ¸ë˜í”½ì„ ìƒˆ í™˜ê²½ìœ¼ë¡œ ì „í™˜
4. ê¸°ì¡´ í™˜ê²½ ì •ë¦¬

### ë¡¤ë§ ë°°í¬
1. ì„œë¹„ìŠ¤ë¥¼ í•˜ë‚˜ì”© ì—…ë°ì´íŠ¸
2. ê° ì„œë¹„ìŠ¤ë³„ í—¬ìŠ¤ì²´í¬ í™•ì¸
3. ë¬¸ì œ ë°œìƒ ì‹œ ì¦‰ì‹œ ë¡¤ë°±

### ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
```bash
# ìŠ¤í‚¤ë§ˆ ë³€ê²½ ì‹œ ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
python migrate.py
```

---

## ğŸ›  ë¬¸ì œ í•´ê²° ê°€ì´ë“œ

### ì¼ë°˜ì ì¸ ë¬¸ì œ í•´ê²°

#### 1. ì»¨í…Œì´ë„ˆ ì‹œì‘ ì‹¤íŒ¨
```bash
# ë¬¸ì œ ì§„ë‹¨
docker-compose ps
docker-compose logs [service_name]

# í•´ê²°ë°©ë²•
docker-compose down
docker-compose up -d --build
```

#### 2. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨
```bash
# MongoDB ìƒíƒœ í™•ì¸
docker exec online-evaluation-mongodb mongo --eval "db.runCommand({ping: 1})"

# ë„¤íŠ¸ì›Œí¬ í™•ì¸
docker network ls
docker network inspect online-evaluation_online-evaluation-network
```

#### 3. API ì‘ë‹µ ì§€ì—°
```bash
# ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ í™•ì¸
docker stats

# ë¡œê·¸ í™•ì¸
docker-compose logs backend | grep -i error
```

#### 4. ë©”ëª¨ë¦¬ ë¶€ì¡±
```bash
# ë©”ëª¨ë¦¬ ì •ë¦¬
docker system prune -f
docker volume prune -f
```

### ë³µêµ¬ ì ˆì°¨

#### 1. ì„œë¹„ìŠ¤ ë³µêµ¬
```bash
# 1ë‹¨ê³„: í˜„ì¬ ìƒíƒœ í™•ì¸
docker-compose ps

# 2ë‹¨ê³„: ë¬¸ì œ ì„œë¹„ìŠ¤ ì¬ì‹œì‘
docker-compose restart [service_name]

# 3ë‹¨ê³„: ì „ì²´ ì¬ì‹œì‘ (í•„ìš”ì‹œ)
docker-compose down && docker-compose up -d
```

#### 2. ë°ì´í„° ë³µêµ¬
```bash
# ë°±ì—…ì—ì„œ ë³µêµ¬
docker cp ./backup online-evaluation-mongodb:/backup
docker exec online-evaluation-mongodb mongorestore /backup
```

---

ì´ ê¸°ìˆ  ëª…ì„¸ì„œëŠ” ì˜¨ë¼ì¸ í‰ê°€ ì‹œìŠ¤í…œì˜ ëª¨ë“  ê¸°ìˆ ì  ì„¸ë¶€ì‚¬í•­ì„ í¬í•¨í•˜ê³  ìˆìœ¼ë©°, ê°œë°œìì™€ ì‹œìŠ¤í…œ ê´€ë¦¬ìê°€ ì‹œìŠ¤í…œì„ ì´í•´í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë° í•„ìš”í•œ ëª¨ë“  ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
